# concurrent-controller

**Description:** 

**Generated from:** `concurrent-controller.yaml`
**Machine Name:** `unknown`
**Version:** `unknown`
**Job Type:** `unknown`

---

## Main State Machine Flow

```mermaid
stateDiagram-v2
    [*] --> checking_queue

    %% PROCESSING
    state PROCESSING {
        [*] --> checking_queue
        checking_queue --> spawning_batch : jobs_found
        spawning_batch --> spawning_batch : worker_spawned
        spawning_batch --> waiting_for_batch : batch_complete
        spawning_batch --> spawning_batch : job_taken
        waiting_for_batch --> checking_queue : all_jobs_complete
        waiting_for_batch --> waiting_for_batch : timeout(2)
        checking_queue --> [*] : no_jobs
        spawning_batch --> [*] : spawn_failed
        waiting_for_batch --> [*] : check_timeout
    }

    %% IDLE
    state IDLE {
        [*] --> idling
        idling --> [*] : timeout(10)
    }

    %% ERROR
    state ERROR {
        [*] --> error_handling
        error_handling --> [*] : retry
    }

    %% Transitions
    PROCESSING --> IDLE : no_jobs
    PROCESSING --> ERROR : spawn_failed
    PROCESSING --> ERROR : check_timeout
    IDLE --> PROCESSING : timeout(10)
    ERROR --> PROCESSING : retry

```

---

## States Overview

| State | Description | Key Actions |
|-------|-------------|-------------|
| `checking_queue` | Checking Queue | log, set_context, get_pending_jobs |
| `spawning_batch` | Spawning Batch | pop_from_list, log, claim_job |
| `waiting_for_batch` | Waiting For Batch | log, wait_for_jobs, log |
| `idling` | Idling | log |
| `error_handling` | Error Handling | log, bash |

---

## Events Overview

| Event | Type | Description |
|-------|------|-------------|
| `jobs_found` | Job | Jobs Found |
| `no_jobs` | Job | No Jobs |
| `has_job` | Job | Has Job |
| `worker_spawned` | Internal | Worker Spawned |
| `batch_complete` | Internal | Batch Complete |
| `job_claimed` | Job | Job Claimed |
| `spawn_failed` | Error | Spawn Failed |
| `job_taken` | Job | Job Taken |
| `all_jobs_complete` | Job | All Jobs Complete |
| `check_timeout` | Internal | Check Timeout |
| `retry` | Internal | Retry |
| `timeout(2)` | Internal | Timeout(2) |
| `timeout(10)` | Internal | Timeout(10) |

---

## Configuration Summary

- **States:** 5
- **Events:** 13
- **Transitions:** 11
- **Initial State:** `checking_queue`

---

*Generated by yaml_to_fsm.py*