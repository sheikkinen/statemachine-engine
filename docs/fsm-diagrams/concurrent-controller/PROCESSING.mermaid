stateDiagram-v2
    %% Detailed view of PROCESSING

    [*] --> checking_queue

    %% Internal transitions
    checking_queue --> spawning_worker : new_job
    spawning_worker --> waiting_for_completion : worker_started
    waiting_for_completion --> checking_queue : timeout(5)

    %% External composites
    state IDLE
    state ERROR

    %% Transitions to other composites
    checking_queue --> IDLE : no_jobs
    spawning_worker --> ERROR : spawn_failed