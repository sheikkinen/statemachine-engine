# patient_records

**Description:** 

**Generated from:** `patient-records.yaml`
**Machine Name:** `unknown`
**Version:** `unknown`
**Job Type:** `unknown`

---

## Main State Machine Flow

```mermaid
stateDiagram-v2
    [*] --> waiting_for_report

    %% IDLE
    state IDLE {
        [*] --> waiting_for_report
        waiting_for_report --> [*] : new_report
    }

    %% SUMMARIZING
    state SUMMARIZING {
        [*] --> summarizing
        summarizing --> summarizing : summary_invalid
        summarizing --> [*] : timeout(10)
        summarizing --> [*] : summary_complete
        summarizing --> [*] : processing_error
    }

    %% FACT_CHECKING
    state FACT_CHECKING {
        [*] --> fact_checking
        fact_checking --> [*] : timeout(5)
        fact_checking --> [*] : validation_passed
        fact_checking --> [*] : validation_failed
        fact_checking --> [*] : processing_error
    }

    %% COMPLETED
    state COMPLETED {
        [*] --> failed
        [*] --> ready
        [*] --> shutdown
        failed --> [*] : retry_report
        ready --> [*] : process_next
    }

    %% Transitions
    IDLE --> SUMMARIZING : new_report
    SUMMARIZING --> FACT_CHECKING : timeout(10)
    SUMMARIZING --> FACT_CHECKING : summary_complete
    FACT_CHECKING --> COMPLETED : timeout(5)
    FACT_CHECKING --> COMPLETED : validation_passed
    FACT_CHECKING --> SUMMARIZING : validation_failed
    SUMMARIZING --> COMPLETED : processing_error
    FACT_CHECKING --> COMPLETED : processing_error
    COMPLETED --> IDLE : retry_report
    COMPLETED --> IDLE : process_next

```

---

## Error Handling Flow

```mermaid
stateDiagram-v2
    %% Error Handling Flow
    summarizing : summarizing
    failed : failed
    fact_checking : fact_checking
    summarizing --> failed : processing_error
    fact_checking --> failed : processing_error
```

---

## Stop/Shutdown Flow

```mermaid
stateDiagram-v2
    %% Stop/Shutdown Flow
    shutdown : shutdown
    stopped --> [*]
    waiting_for_report --> shutdown : stop
    summarizing --> shutdown : stop
    fact_checking --> shutdown : stop
```

---

## States Overview

| State | Description | Key Actions |
|-------|-------------|-------------|
| `waiting_for_report` | Waiting For Report | log |
| `summarizing` | Summarizing | log, log |
| `fact_checking` | Fact Checking | log, log |
| `ready` | Ready | log, bash |
| `failed` | Failed | log |
| `shutdown` | Shutdown | log |

---

## Events Overview

| Event | Type | Description |
|-------|------|-------------|
| `new_report` | Internal | New Report |
| `summary_complete` | Internal | Summary Complete |
| `summary_invalid` | Internal | Summary Invalid |
| `validation_passed` | Internal | Validation Passed |
| `validation_failed` | Error | Validation Failed |
| `processing_error` | Internal | Processing Error |
| `retry_report` | Internal | Retry Report |
| `process_next` | Internal | Process Next |
| `stop` | Control | Stop |

---

## Configuration Summary

- **States:** 6
- **Events:** 9
- **Transitions:** 12
- **Initial State:** `waiting_for_report`

---

*Generated by yaml_to_fsm.py*