<svg id="mermaid-1761506845500" width="100%" xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink" class="statediagram"
    style="max-width: 525.80078125px;" viewBox="0 0 W H"
    role="graphics-document document" aria-roledescription="stateDiagram">
    <style>#mermaid-1761506845500{font-family:"trebuchet
        ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes
        edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes
        dash{to{stroke-dashoffset:0;}}#mermaid-1761506845500
        .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s
        linear infinite;stroke-linecap:round;}#mermaid-1761506845500
        .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s
        linear infinite;stroke-linecap:round;}#mermaid-1761506845500
        .error-icon{fill:#552222;}#mermaid-1761506845500
        .error-text{fill:#552222;stroke:#552222;}#mermaid-1761506845500
        .edge-thickness-normal{stroke-width:1px;}#mermaid-1761506845500
        .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1761506845500
        .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1761506845500
        .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-1761506845500
        .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1761506845500
        .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1761506845500
        .marker{fill:#333;stroke:#333;}#mermaid-1761506845500
        .marker.cross{stroke:#333;}#mermaid-1761506845500 svg{font-family:"trebuchet
        ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1761506845500
        p{margin:0;}#mermaid-1761506845500 defs
        #statediagram-barbEnd{fill:#333333;stroke:#333333;}#mermaid-1761506845500 g.stateGroup
        text{fill:#9370DB;stroke:none;font-size:10px;}#mermaid-1761506845500 g.stateGroup
        text{fill:#333;stroke:none;font-size:10px;}#mermaid-1761506845500 g.stateGroup
        .state-title{font-weight:bolder;fill:#131300;}#mermaid-1761506845500 g.stateGroup
        rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1761506845500 g.stateGroup
        line{stroke:#333;stroke-width:1;}#mermaid-1761506845500
        .transition{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1761506845500 .stateGroup
        .composit{fill:white;border-bottom:1px;}#mermaid-1761506845500 .stateGroup
        .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaid-1761506845500
        .state-note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1761506845500 .state-note
        text{fill:black;stroke:none;font-size:10px;}#mermaid-1761506845500 .stateLabel
        .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1761506845500 .edgeLabel
        .label rect{fill:#ECECFF;opacity:0.5;}#mermaid-1761506845500
        .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1761506845500
        .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-1761506845500 .edgeLabel
        rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232,
        0.8);}#mermaid-1761506845500 .edgeLabel .label text{fill:#333;}#mermaid-1761506845500 .label
        div .edgeLabel{color:#333;}#mermaid-1761506845500 .stateLabel
        text{fill:#131300;font-size:10px;font-weight:bold;}#mermaid-1761506845500 .node
        circle.state-start{fill:#333;stroke:#333;}#mermaid-1761506845500 .node
        .fork-join{fill:#333;stroke:#333;}#mermaid-1761506845500 .node
        circle.state-end{fill:#9370DB;stroke:white;stroke-width:1.5;}#mermaid-1761506845500
        .end-state-inner{fill:white;stroke-width:1.5;}#mermaid-1761506845500 .node
        rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1761506845500 .node
        polygon{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1761506845500
        #statediagram-barbEnd{fill:#333;}#mermaid-1761506845500 .statediagram-cluster
        rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1761506845500
        .cluster-label,#mermaid-1761506845500 .nodeLabel{color:#131300;}#mermaid-1761506845500
        .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaid-1761506845500 .statediagram-state
        .divider{stroke:#9370DB;}#mermaid-1761506845500 .statediagram-state
        .title-state{rx:5px;ry:5px;}#mermaid-1761506845500
        .statediagram-cluster.statediagram-cluster .inner{fill:white;}#mermaid-1761506845500
        .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f0f0f0;}#mermaid-1761506845500
        .statediagram-cluster .inner{rx:0;ry:0;}#mermaid-1761506845500 .statediagram-state
        rect.basic{rx:5px;ry:5px;}#mermaid-1761506845500 .statediagram-state
        rect.divider{stroke-dasharray:10,10;fill:#f0f0f0;}#mermaid-1761506845500
        .note-edge{stroke-dasharray:5;}#mermaid-1761506845500 .statediagram-note
        rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid-1761506845500
        .statediagram-note
        rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid-1761506845500
        .statediagram-note text{fill:black;}#mermaid-1761506845500 .statediagram-note
        .nodeLabel{color:black;}#mermaid-1761506845500 .statediagram
        .edgeLabel{color:red;}#mermaid-1761506845500 #dependencyStart,#mermaid-1761506845500
        #dependencyEnd{fill:#333;stroke:#333;stroke-width:1;}#mermaid-1761506845500
        .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1761506845500
        :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
    <g>
        <defs>
            <marker id="mermaid-1761506845500_stateDiagram-barbEnd" refX="19" refY="7"
                markerWidth="20" markerHeight="14" markerUnits="userSpaceOnUse" orient="auto">
                <path d="M 19,7 L9,13 L14,7 L9,1 Z"></path>
            </marker>
        </defs>
        <g class="root">
            <g class="clusters"></g>
            <g class="edgePaths">
                <path
                    d="PATH"
                    id="edge0" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge0"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"></path>
                <path
                    d="PATH"
                    id="edge1" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge1"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="model_switched_to_sdxl"></path>
                <path
                    d="PATH"
                    id="edge2" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge2"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="prompt_enhanced"></path>
                <path
                    d="PATH"
                    id="edge3" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge3"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="prompt_unchanged"></path>
                <path
                    d="PATH"
                    id="edge4" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge4"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="prompt_updated"></path>
                <path
                    d="PATH"
                    id="edge5" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge5"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="prompt_update_failed"></path>
                <path
                    d="PATH"
                    id="edge6" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge6"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="image_generated"></path>
                <path
                    d="PATH"
                    id="edge7" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge7"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="image_generated"></path>
                <path
                    d="PATH"
                    id="edge8" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge8"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="early_faces_detected"></path>
                <path
                    d="PATH"
                    id="edge9" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge9"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="no_faces_detected"></path>
                <path
                    d="PATH"
                    id="edge10" class="edge-thickness-normal edge-pattern-solid transition"
                    style="fill:none;;;fill:none" data-edge="true" data-et="edge" data-id="edge10"
                    data-points="POINTS"
                    marker-end="url(#mermaid-1761506845500_stateDiagram-barbEnd)"
                    data-edge-event="image_scaled"></path>
            </g>
            <g class="edgeLabels">
                <g class="edgeLabel">
                    <g class="label" data-id="edge0" transform="translate(X,Y)">
                        <foreignObject width="0" height="0">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel"></span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge1" transform="translate(X,Y)">
                        <foreignObject width="176.046875" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>model_switched_to_sdxl</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge2" transform="translate(X,Y)">
                        <foreignObject width="129.5703125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>prompt_enhanced</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge3" transform="translate(X,Y)">
                        <foreignObject width="137.6171875" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>prompt_unchanged</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge4" transform="translate(X,Y)">
                        <foreignObject width="119.609375" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>prompt_updated</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge5" transform="translate(X,Y)">
                        <foreignObject width="160.328125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>prompt_update_failed</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge6" transform="translate(X,Y)">
                        <foreignObject width="124.234375" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>image_generated</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge7" transform="translate(X,Y)">
                        <foreignObject width="124.234375" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>image_generated</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge8" transform="translate(X,Y)">
                        <foreignObject width="154.8046875" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>early_faces_detected</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge9" transform="translate(X,Y)">
                        <foreignObject width="136.171875" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>no_faces_detected</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="edgeLabel" transform="translate(X,Y)">
                    <g class="label" data-id="edge10" transform="translate(X,Y)">
                        <foreignObject width="96.5625" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="edgeLabel">
                                    <p>image_scaled</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
            </g>
            <g class="nodes">
                <g class="node default" id="state-root_start-0"
                    transform="translate(X,Y)">
                    <circle class="state-start" r="7" width="14" height="14"></circle>
                </g>
                <g class="node  statediagram-state" id="state-switching_to_sdxl-1"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="127.125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>switching_to_sdxl</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-enhancing_prompt-3"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="133.265625" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>enhancing_prompt</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-updating_job_prompt-5"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="155.0625" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>updating_job_prompt</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-generating_fallback_image-7"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="193.390625" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>generating_fallback_image</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-generating_enhanced_image-6"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="205.2421875" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;">
                                <span class="nodeLabel">
                                    <p>generating_enhanced_image</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-early_face_detection-9"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="152.578125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>early_face_detection</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-scaling_image-10"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="100.2578125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>scaling_image</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
                <g class="node  statediagram-state" id="state-COMPLETIONPHASE-10"
                    transform="translate(X,Y)">
                    <g class="basic label-container outer-path">
                        <path
                            d="PATH"
                            stroke="none" stroke-width="0" fill="#ECECFF" style=""></path>
                        <path
                            d="PATH"
                            stroke="#9370DB" stroke-width="1.3" fill="none" stroke-dasharray="0 0"
                            style=""></path>
                    </g>
                    <g class="label" style="" transform="translate(X,Y)">
                        <rect></rect>
                        <foreignObject width="137.125" height="24">
                            <div xmlns="http://www.w3.org/1999/xhtml"
                                style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;">
                                <span class="nodeLabel">
                                    <p>COMPLETIONPHASE</p>
                                </span>
                            </div>
                        </foreignObject>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>